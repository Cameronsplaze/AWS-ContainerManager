
Ec2:
  InstanceType: m5.large

Container:
  # Docs here: https://github.com/mbround18/valheim-docker
  Image: mbround18/valheim:latest
  Ports:
    - UDP: 2456
    - UDP: 2457
    - UDP: 2458
  Environment:
    TYPE: BepInEx
    # Mods Docs: https://github.com/mbround18/valheim-docker/blob/main/docs/tutorials/getting_started_with_mods.md
    # MODS: |
    #   TODO
    PORT: 2456
    NAME: !ENV ${VALHEIM_SERVER_NAME}
    WORLD: "Valhalla"
    PUBLIC: 0 # False
    PASSWORD: !ENV ${VALHEIM_SERVER_PASS}
    ENABLE_CROSSPLAY: 0 # For Microsoft store, NOT XBox. You can't do mods with XBox anyways.
    # World Modifiers list: https://www.reddit.com/r/valheim/comments/16us3ql/how_to_world_modifiers_in_game_works_on_dedicated/
    MODIFIERS: "resources=most,portals=casual"
    TZ: !ENV ${TIMEZONE}
    # Since this container is on-demand, the only time we can update is on startup:
    UPDATE_ON_STARTUP: 1 # True
    AUTO_UPDATE: 0 # False
    AUTO_BACKUP: 0 # False
    SCHEDULED_RESTART: 0 # Turns off when idle.

Volumes:
  ## NOTE:
  # Under 'root directory' here: https://docs.aws.amazon.com/efs/latest/ug/API_CreateAccessPoint.html#API_CreateAccessPoint_RequestBody
  # Then under 'Path' here: https://docs.aws.amazon.com/efs/latest/ug/API_RootDirectory.html
  # You get a Regex. That regex does NOT allow hidden directories, hence why
  # this Config path doesn't work:
  ## ALSO apparently you only get a max of 4 directories deep w/ that regex:
  # # Holds the save info
  # Config:
  #   Paths:
  #     - Path: /home/steam/.config/unity3d/IronGate/Valheim
  # Holds server download file
  Download:
    EnableBackups: False
    KeepOnDelete: False
    Paths:
      - Path: /home/steam/valheim

## Config options for how to monitor for players:
##   (Currently the default anyways...) 
Watchdog:
  Threshold: 400
  InstanceLeftUp:
    DurationHours: 8
    ShouldStop: True
