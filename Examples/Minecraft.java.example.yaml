
Ec2:
  # IF you change this, change `INIT_MEMORY` and `MAX_MEMORY` below too (to this - 1G)
  InstanceType: m5.large # 2vCPUs, 8GB RAM

Container:
  # Docs here: https://docker-minecraft-server.readthedocs.io/en/latest/
  Image: itzg/minecraft-server
  Ports:
    - TCP: 25565
    # Only required for GeyserMC Bedrock connections:
    - UDP: 19132
  Environment:
    EULA: True
    INIT_MEMORY: 7G
    MAX_MEMORY: 7G
    TYPE: FABRIC
    MOTD: \u00a78The \u00a74\u00a7lPerfect\u00a78 Minecraft Server (on %VERSION%)
    VERSION: !ENV ${MC_VERSION} # Need to set for mods. With ViaVersion, clients can have other versions though.

    ### From https://docker-minecraft-server.readthedocs.io/en/latest/configuration/misc-options/#openj9-specific-options
    TUNE_VIRTUALIZED: True
    ENABLE_RCON: False
    # RCRON_PASSWORD: !ENV ${RCRON_PASSWORD}

    # ### PLUGINS: Things not on MODRINTH, but still required.
    # # geyser-viaproxy: Lets geyser work with ViaVersion and ViaBackwards.
    # #      https://geysermc.org/download/
    # PLUGINS: |
    #   https://download.geysermc.org/v2/projects/geyser/versions/latest/builds/latest/downloads/viaproxy

    # https://docker-minecraft-server.readthedocs.io/en/latest/mods-and-plugins/modrinth/#extra-options
    MODRINTH_DOWNLOAD_DEPENDENCIES: required

    ### MODRINTH MODS:
    # viaversion + viabackwards: Let clients with different versions connect to server. (beta for newest bedrock clients)
    #      https://modrinth.com/plugin/viaversion
    #      https://modrinth.com/plugin/viabackwards
    # viafabric: Required for ViaVersion and ViaBackwards to work on Fabric. (Modrinth lists it as optional)
    #      https://modrinth.com/mod/viafabric
    # geyser + floodgate: Let Bedrock clients connect to the server too (Geyser ONLY has beta)
    #      https://modrinth.com/plugin/geyser
    #      https://modrinth.com/mod/floodgate
    # open-parties-and-claims: For letting people claim land, and see claims on xaeros-world-map (ONLY has beta)
    #      https://modrinth.com/mod/open-parties-and-claims
    # no-enderrman-grief: Prevents Endermen from picking up blocks, and placing them down.
    #      https://modrinth.com/datapack/no-enderman-grief
    MODRINTH_PROJECTS: |
      geyser:beta
      floodgate

      viafabric:alpha
      viaversion:beta
      viabackwards:beta

      open-parties-and-claims:beta
      no-enderman-grief

# Volumes:
#   - Type: EFS # EFS or (eventually) S3. EFS is the default.
#     EnableBackups: True
#     KeepOnDelete: True
#     Paths:
#       - Path: /data
#         ReadOnly: False

## Config options for how to monitor for players:
# (Only required since we're using BOTH tcp and udp)
Watchdog:
  Threshold: 1175
  InstanceLeftUp:
    DurationHours: 8
    ShouldStop: True

# AlertSubscription:
#   Email: Does@Not.Exist Does@Not.Exist2
